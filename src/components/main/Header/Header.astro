---
import { getLangFromUrl, useTranslations } from "../../../i18n/utils"
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
import styles from './Header.module.css';

const homeHref = `/${lang}/`;
---

<header class={styles.header}>
  <a href={`${homeHref}`} class={styles.promoBanner}>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class={styles.promoIcon}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
    {t("banner.title")}
  </a>
  <div class={styles.container}>
    <div class={styles.logo}>
      <a href={homeHref} class={styles.logoLink}>
        <span class={styles.logoBracket}>&lt;</span>
        Codessa
        <span class={styles.logoBracket}>/&gt;</span>
      </a>
    </div>

    <input type="checkbox" id="menu-toggle" class={styles.menuToggle} />
    <label for="menu-toggle" class={styles.hamburger}>
      <span class={styles.bar}></span>
      <span class={styles.bar}></span>
      <span class={styles.bar}></span>
    </label>

    <nav class={styles.nav}>
      <a href={`${homeHref}#services`}>{t('nav.services')}</a>
      <a href={`${homeHref}#process`}>{t('nav.process')}</a>
      <a href={`${homeHref}#faq`}>{t('nav.faq')}</a>
      <a href={`${homeHref}contact`}>{t('nav.cta')}</a>
    </nav>
  </div>
</header>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.getElementById('menu-toggle');
    const navLinks = document.querySelectorAll('nav a');

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (toggle && toggle.checked) {
          toggle.checked = false;
        }
      });
    });
  });
</script>