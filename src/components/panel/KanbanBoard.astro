---
// Datos de ejemplo para el board Kanban
const columns = [
  {
    id: 'todo',
    title: 'Por Hacer',
    color: '#6b7280',
    tasks: [
      {
        id: 't1',
        title: 'Diseñar mockups cliente ABC',
        description: 'Crear wireframes y diseños de alta fidelidad',
        priority: 'alta',
        assignee: 'María G.',
        dueDate: '2025-01-20',
        tags: ['Diseño', 'UI/UX']
      },
      {
        id: 't2',
        title: 'Setup servidor producción',
        description: 'Configurar ambiente de producción',
        priority: 'media',
        assignee: 'Carlos L.',
        dueDate: '2025-01-18',
        tags: ['DevOps', 'Backend']
      }
    ]
  },
  {
    id: 'in-progress',
    title: 'En Progreso',
    color: '#3b82f6',
    tasks: [
      {
        id: 't3',
        title: 'Desarrollar API usuarios',
        description: 'Implementar endpoints para gestión de usuarios',
        priority: 'alta',
        assignee: 'Ana R.',
        dueDate: '2025-01-22',
        tags: ['Backend', 'API']
      },
      {
        id: 't4',
        title: 'Integración sistema pagos',
        description: 'Conectar con Stripe API',
        priority: 'alta',
        assignee: 'Luis M.',
        dueDate: '2025-01-25',
        tags: ['Frontend', 'Pagos']
      }
    ]
  },
  {
    id: 'review',
    title: 'En Revisión',
    color: '#f59e0b',
    tasks: [
      {
        id: 't5',
        title: 'Testing componentes UI',
        description: 'Pruebas unitarias y de integración',
        priority: 'media',
        assignee: 'Pedro S.',
        dueDate: '2025-01-19',
        tags: ['Testing', 'QA']
      }
    ]
  },
  {
    id: 'done',
    title: 'Completado',
    color: '#10b981',
    tasks: [
      {
        id: 't6',
        title: 'Documentación técnica',
        description: 'Documentar APIs y componentes',
        priority: 'baja',
        assignee: 'Elena V.',
        dueDate: '2025-01-15',
        tags: ['Docs']
      },
      {
        id: 't7',
        title: 'Configuración base de datos',
        description: 'Setup inicial PostgreSQL',
        priority: 'alta',
        assignee: 'Roberto M.',
        dueDate: '2025-01-12',
        tags: ['Database', 'Backend']
      }
    ]
  }
];
---

<div class="kanban-board">
  <div class="board-header">
    <h2>Gestión de Procesos</h2>
    <button class="btn-add-task">
      <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
      </svg>
      Nueva Tarea
    </button>
  </div>

  <div class="board-columns">
    {columns.map((column) => (
      <div class="column">
        <div class="column-header">
          <div class="column-title">
            <div class="column-indicator" style={`background-color: ${column.color}`}></div>
            <h3>{column.title}</h3>
            <span class="task-count">{column.tasks.length}</span>
          </div>
          <button class="column-menu">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
          </button>
        </div>

        <div class="tasks-container">
          {column.tasks.map((task) => (
            <div class="task-card">
              <div class="task-header">
                <span class={`priority-badge ${task.priority}`}>
                  {task.priority}
                </span>
                <button class="task-menu">
                  <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                  </svg>
                </button>
              </div>

              <h4 class="task-title">{task.title}</h4>
              <p class="task-description">{task.description}</p>

              <div class="task-tags">
                {task.tags.map((tag) => (
                  <span class="tag">{tag}</span>
                ))}
              </div>

              <div class="task-footer">
                <div class="task-assignee">
                  <div class="avatar">
                    {task.assignee.charAt(0)}
                  </div>
                  <span>{task.assignee}</span>
                </div>
                
                <div class="task-due-date">
                  <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                  </svg>
                  <span>{task.dueDate}</span>
                </div>
              </div>
            </div>
          ))}
          
          <button class="add-task-btn">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            Agregar tarea
          </button>
        </div>
      </div>
    ))}
  </div>
</div>

<style>
  .kanban-board {
    min-height: calc(100vh - 4rem);
    padding: 2rem 0;
  }

  .board-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .board-header h2 {
    color: var(--color-text);
    font-size: 1.75rem;
    font-weight: 600;
  }

  .btn-add-task {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background-color: var(--color-accent);
    color: white;
    border-radius: var(--border-radius);
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .btn-add-task:hover {
    background-color: var(--color-accent-hover);
  }

  .board-columns {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    align-items: start;
  }

  .column {
    background-color: var(--color-primary);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--color-border);
    min-height: 500px;
  }

  .column-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.25rem;
    border-bottom: 1px solid var(--color-border);
  }

  .column-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .column-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }

  .column-title h3 {
    color: var(--color-text);
    font-size: 1rem;
    font-weight: 600;
  }

  .task-count {
    background-color: var(--color-secondary);
    color: var(--color-text-muted);
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
  }

  .column-menu {
    color: var(--color-text-muted);
    padding: 0.25rem;
    transition: color 0.2s ease;
  }

  .column-menu:hover {
    color: var(--color-text);
  }

  .tasks-container {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .task-card {
    background-color: var(--color-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    padding: 1rem;
    transition: all 0.2s ease;
    cursor: grab;
  }

  .task-card:hover {
    border-color: var(--color-accent);
    box-shadow: var(--shadow-md);
  }

  .task-card:active {
    cursor: grabbing;
  }

  .task-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
  }

  .priority-badge {
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    letter-spacing: 0.05em;
  }

  .priority-badge.alta {
    background-color: rgba(239, 68, 68, 0.2);
    color: #ef4444;
  }

  .priority-badge.media {
    background-color: rgba(251, 191, 36, 0.2);
    color: #fbbf24;
  }

  .priority-badge.baja {
    background-color: rgba(34, 197, 94, 0.2);
    color: #22c55e;
  }

  .task-menu {
    color: var(--color-text-muted);
    padding: 0.25rem;
    transition: color 0.2s ease;
  }

  .task-menu:hover {
    color: var(--color-text);
  }

  .task-title {
    color: var(--color-text);
    font-size: 0.975rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  .task-description {
    color: var(--color-text-muted);
    font-size: 0.875rem;
    line-height: 1.4;
    margin-bottom: 0.75rem;
  }

  .task-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
    margin-bottom: 1rem;
  }

  .tag {
    background-color: var(--color-primary);
    color: var(--color-accent);
    font-size: 0.7rem;
    font-weight: 500;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    border: 1px solid var(--color-border);
  }

  .task-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .task-assignee {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .avatar {
    width: 24px;
    height: 24px;
    background-color: var(--color-accent);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.625rem;
    font-weight: 600;
  }

  .task-assignee span {
    font-size: 0.75rem;
    color: var(--color-text-muted);
  }

  .task-due-date {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    color: var(--color-text-muted);
    font-size: 0.75rem;
  }

  .add-task-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem;
    background-color: transparent;
    color: var(--color-text-muted);
    border: 2px dashed var(--color-border);
    border-radius: var(--border-radius);
    font-size: 0.875rem;
    transition: all 0.2s ease;
  }

  .add-task-btn:hover {
    background-color: var(--color-secondary);
    color: var(--color-accent);
    border-color: var(--color-accent);
  }

  @media (max-width: 768px) {
    .board-columns {
      grid-template-columns: 1fr;
    }
    
    .board-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 1rem;
    }
  }
</style>